function initHTMLElements(){var a=new Settings,b=function(b,c,d){var e=a.get(b);return null==e?($("#"+c).addClass(d),a.set(b,c),c):($("#"+e).addClass(d),e)};$("#stats-submit").click(function(){$.ajax("submit.php",{type:"POST",success:function(a){var b=$.parseJSON(a),c=b.disease_link,d=b.disease_category,e=b.play_count,f=b.score,g=b.game_highscore,h=b.bio_id,i="Thank you! Your alignment has been submitted. You played the block "+h+".<br/>\n";if(f==g)var j="You received the new highscore!<br/>\n";else var j="";if(c)if(d)var k="This blocks was associated with a "+d+' disease "'+c+'".<br/>\n';else var k='This blocks was associated with the "'+c+'" disease.<br/>\n';else if(d)var k="This blocks was associated with a "+d+" disease.<br/>\n";else var k="";var l="This blocks has been played "+e+" times, and the highest score is "+g+".<br/>\nYour score is "+f+".<br/>\n",m=i.concat(j,k,l);bootbox.dialog(m,[{label:"Share!","class":"btn-success",icon:"icon-share icon-white",callback:function(){if($.cookie.read("username")){$.cookie.read("username");var a=$.cookie.read("fullname"),b=$.cookie.read("loginmode"),e=$.cookie.read("logid");if("Facebook"==b){if(f==g)var h=a.replace("+"," ")+" received a new highscore at Phylo";else var h=a.replace("+"," ")+" played Phylo";if(c)var i=' and helped to improve a DNA alignement related to a disease named "'+c+'".\nPlay Phylo and help genetic research!';else if(d)var i=" and helped to improve a DNA alignement related to "+d+" diseases.\nPlay Phylo and help genetic research!";else var i=".\nPlay Phylo and help genetic research!";var j=h+i,k="DNA puzzles",l="provider="+b+"&id="+e+"&caption="+k+"&description="+j;bootbox.confirm("Phylo will update your status:<br/>\n"+j,"Cancel","Post",function(a){a&&(console.log("post on "+b+" : "+j),$.ajax({type:"POST",url:"http://phylo.cs.mcgill.ca/phpdb/social/feed.php",data:l}).done(function(){bootbox.alert("Your achievement has been posted!")}).fail(function(){bootbox.alert("We are sorry. We have not been able to post your achievement.")}))})}else if("Twitter"==b){var j='Improved a DNA alignments related to "'+c+'".',l="provider="+b+"&id="+e+"&description="+j;bootbox.confirm("Phylo will update your status: "+j,"Cancel","Tweet",function(a){a&&(console.log("post on "+b+" : "+j),$.ajax({type:"POST",url:"http://phylo.cs.mcgill.ca/phpdb/social/feed.php",data:l}).done(function(){bootbox.alert("Your achievement has been posted!")}).fail(function(){bootbox.alert("We are sorry. We have not been able to post your achievement.")}))})}else if("LinkedIn"==b){var j=a.replace("+"," ")+' used Phylo and improved a DNA alignments related to "'+c+'".',l="provider="+b+"&id="+e+"&description="+j;bootbox.confirm("Phylo will update your status: "+j,"Cancel","Post",function(a){a&&(console.log("post on "+b+" : "+l),$.ajax({type:"POST",url:"http://phylo.cs.mcgill.ca/phpdb/social/feed.php",data:l}).done(function(){bootbox.alert("Your achievement has been posted!")}).fail(function(){bootbox.alert("We are sorry. We have not been able to post your achievement.")}))})}}}},{label:"Continue",icon:"icon-play"},{label:"Back to Menu","class":"btn-primary",icon:"icon-book icon-white",callback:function(){window.location="http://phylo.cs.mcgill.ca/expert/playmenu.php"}}])},error:function(a,b){bootbox.alert(b)},data:getCurrentState()})}),$("#stage-redirect").bind("keydown",function(a){var b=a.keyCode?a.keyCode:a.which?a.which:a.charCode;if(13==b){var c=document.location.search.replace("?",""),d="";if(c){var e=c.split("&");for(var f in e)-1==e[f].indexOf("id")&&(d+=e[f]+"&")}var g="?"+d+"id="+$(this).val();return document.location.search=g,a.preventDefault(),!1}return!0}),$("#options-language-english").click(function(){$("#options-language-french").removeClass("active"),$("#options-language-english").addClass("active"),a.set("options-language",this.id)}),$("#options-language-french").click(function(){$("#options-language-english").removeClass("active"),$("#options-language-french").addClass("active"),a.set("options-language",this.id)}),b("options-language","options-language-english","active");var c=function(a){return function(){var b=new Settings;$("#options-size-xlarge").removeClass("active"),$("#options-size-large").removeClass("active"),$("#options-size-medium").removeClass("active"),$("#options-size-small").removeClass("active"),$(this).addClass("active"),b.set("options-size",this.id),resizeBoxes(a)}};$("#options-size-small").click(c(20)),$("#options-size-medium").click(c(25)),$("#options-size-large").click(c(30)),$("#options-size-xlarge").click(c(40));var d=b("options-size","options-size-small","active");$("#"+d).click(),$("#options-misc-subscore").click(function(){var b=$(this);b.hasClass("active")?(args.ui_showscore=!1,b.removeClass("active"),a.set("options-misc-subscore",!1)):(args.ui_showscore=!0,b.addClass("active"),a.set("options-misc-subscore",!0)),drawTree(tctx)}),d=a.get("options-misc-subscore"),null==d?a.set("options-misc-subscore",!1):d&&$("#options-misc-subscore").addClass("active"),args.ui_showscore=!!a.get("options-misc-subscore"),$(".collapse").collapse()}